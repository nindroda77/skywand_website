(function ($) {

//mailchimp subscribe function with single opt-in option.

    function Mailchimp_Subscribe(email, apikey, listid, data_center)
    {
        $.ajax({
            type: "GET",
            url: 'https://' + data_center + '.api.mailchimp.com/2.0/lists/subscribe.json?apikey=' + apikey + '&id=' + listid + '&email[email]=' + email + '&double_optin=false&send_welcome=false',
            //data: $form.serialize(),
            crossOrigin: true,
            cache: false,
            dataType: "jsonp",
            jsonp: "c", // trigger MailChimp to return a JSONP response
            contentType: "application/json; charset=utf-8",
            error: function (error) {

                console.log(error.status);
                if (error.status == '200')
                {
                    $('#subscribe-result').hide().html('<div class="success">You have Subscribed Successfully.</div>').slideDown().delay(10000).slideUp();
                }
                else if (error.status == '404')
                {
                    $('#subscribe-result').hide().html('<div class="error">Sorry! your email Already Registered.</div>').slideDown().delay(10000).slideUp();
                }

                // According to jquery docs, this is never called for cross-domain JSONP requests
            },
            success: function (data) {
                //console.log(data);
                if (data.result != "success") {

                    if (data.msg.indexOf("already subscribed") >= 0) {
                        $('#subscribe-result').hide().html('<div class="error">Sorry! your email Already Registered.</div>').slideDown().delay(10000).slideUp();

                    }

                } else {
                    $('#subscribe-result').hide().html('<div class="success">You have Subscribed Successfully.</div>').slideDown().delay(10000).slideUp();
                }
            }
        });
    }


    $("#mailchimp").submit(function (e) {
        e.preventDefault();
        var email = $("#usermail").val();
        var apikey = "3eb8d5aa9fb8234b926cd00693f3d8fb-us13";
        var listid = "696dcd5116";
        var data_center = "us13";
        Mailchimp_Subscribe(email, apikey, listid, data_center);

    });


})(jQuery);